@model IEnumerable<IntensiveLearning.Database.Center>

@{
    ViewBag.Title = "لائحة المراكز";
}

<h2>لائحة المراكز</h2>
@if (Session["AddCitesAndCenters"] != null)
{
    if ((bool)Session["AddCitesAndCenters"] == true)
    {
        using (Html.BeginForm("Create", "Centers", FormMethod.Get))
        {
            <div style="margin-bottom:15px;">
                <button type="submit" class="btn btn-warning">انشاء جديد</button>
            </div>
        }
    }
}
<div id="table_wrapper">

    <table class="table table-striped">
        <thead>
            <tr class="bg-primary">
                <th rowspan="2"></th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Name)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Place)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Desc)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.FoundationType)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.MonthlyPayment)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Owner)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.QuarterPayment)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.City.Name)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.Notes)
                </th>
                <th rowspan="1" colspan="12">
                    الشهر
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.State)
                </th>
                <th rowspan="2">
                    @Html.DisplayNameFor(model => model.HolesN)
                </th>
                <th rowspan="2">التوقيع</th>
                <th rowspan="2">الاثبات</th>
                @if (Session["SeeAll"]!=null)
                {
                    if ((bool)Session["SeeAll"] == true)
                    {
                        <th rowspan="2">الميزانية</th>
                    }
                }





                <th rowspan="2"></th>




            </tr>
            <tr class="bg-primary">
                <th rowspan="1">
                    10
                </th>
                <th rowspan="1">
                    11
                </th>
                <th rowspan="1">
                    12
                </th>
                <th rowspan="1">
                    1
                </th>
                <th rowspan="1">
                    2
                </th>
                <th rowspan="1">
                    3
                </th>
                <th rowspan="1">
                    4
                </th>
                <th rowspan="1">
                    5
                </th>
                <th rowspan="1">
                    6
                </th>
                <th rowspan="1">
                    7
                </th>

                <th rowspan="1">
                    8
                </th>





                <th rowspan="1">
                    9
                </th>




            </tr>
        </thead>
        <tbody>
            @if (Model != null)
            {

                foreach (var item in Model)
                {
                    <tr>
                        <td  @if (item.Approval == null) { @:style="background-color:gray"
                                                        } else if (item.Approval != null) { if (item.Approval == true) { @:style="background-color:#5cb85c"
                                                            } else { @:style="background-color:#d9534f"
                                                            } }></td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Place)


                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Desc)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.FoundationType)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.MonthlyPayment)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Owner)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.QuarterPayment)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.City.Name)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Notes)
                        </td>
                        <td>
                            @if (item.Month10 != null)

                            {
                                /**/
                                if (item.Month10 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month11 != null)

                            {
                                /**/
                                if (item.Month11 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month12 != null)

                            {
                                /**/
                                if (item.Month12 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month1 != null)

                            {
                                /**/
                                if (item.Month1 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month2 != null)

                            {
                                /**/
                                if (item.Month2 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month3 != null)

                            {
                                /**/
                                if (item.Month3 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month4 != null)

                            {
                                /**/
                                if (item.Month4 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month5 != null)

                            {
                                /**/
                                if (item.Month5 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month6 != null)

                            {
                                /**/
                                if (item.Month6 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month7 != null)

                            {
                                /**/
                                if (item.Month7 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month8 != null)

                            {
                                /**/
                                if (item.Month8 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @if (item.Month9 != null)

                            {
                                /**/
                                if (item.Month9 == true)
                                {
                                    @:نعم
                                }
                                else
                                {
                                    @:لا
                                }
                            }
                            else
                            {
                                @:لا
                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.State)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.HolesN)
                        </td>
                        <td>
                            @if (Session["HighAcceptance"] != null)
                            {
                                if ((bool)Session["HighAcceptance"] == true)
                                {
                                    if (item.Approval == null)
                                    {
                                        <a href="@Url.Action("Approvals","Json",new { id = item.id, type = "Centers",acceptance = true })" style="color:forestgreen">قبول</a>
                                        <a href="@Url.Action("Approvals","Json",new { id = item.id, type = "Centers",acceptance = false })" style="color:darkred">رفض</a>
                                    }
                                    else if (item.Approval != null)
                                    {
                                        if (item.Approval == true)
                                        {
                                            <p style="color:forestgreen">مقبول</p>

                                        }
                                        else
                                        {
                                            <p style="color:darkred">مرفوض</p>

                                        }
                                    }

                                }
                                else if (item.Approval == null)
                                {
                                    <p style="color:gray">بالانتظار</p>
                                }
                                else if (item.Approval != null)
                                {
                                    if (item.Approval == true)
                                    {
                                        <p style="color:forestgreen">مقبول</p>

                                    }
                                    else
                                    {
                                        <p style="color:darkred">مرفوض</p>

                                    }
                                }

                            }
                            else if (item.Approval == null)
                            {
                                <p style="color:gray">بالانتظار</p>
                            }
                            else if (item.Approval != null)
                            {
                                if (item.Approval == true)
                                {
                                    <p style="color:forestgreen">مقبول</p>

                                }
                                else
                                {
                                    <p style="color:darkred">مرفوض</p>

                                }
                            }
                        </td>

                        <td>
                            @if (item.Proof != null)
                            {
                                <a href="@Url.Action("DownloadProof", "Json", new { ImageName = item.Proof} )" class="btn btn-warning"><span class="glyphicon glyphicon-download-alt"></span></a>
                            }
                        </td>


                        @if (Session["SeeAll"] != null)
                        {
                            if ((bool)Session["SeeAll"] == true)
                            {
                                <td>@Html.DisplayFor(modelItem => item.SpentBudget)</td>
                            }
                        }
                        <td>
                            @if (Session["AddCitesAndCenters"] != null)
                            {
                                if ((bool)Session["AddCitesAndCenters"] == true)
                                {
                                    <div style="width:130px;">
                                        <a href="/Centers/Delete/@item.id" class="btn btn-danger"><span class="glyphicon glyphicon-trash"></span></a>
                                        <a href="/Centers/Details/@item.id" class="btn btn-info"><span class="glyphicon glyphicon-folder-open"></span></a>
                                        <a href="/Centers/Edit/@item.id" class="btn btn-success"><span class="glyphicon glyphicon-pencil"></span></a>
                                    </div>
                                }
                            }
                            else
                            {
                                <a href="/Centers/Details/@item.id" class="btn btn-info"><span class="glyphicon glyphicon-folder-open"></span></a>
                            }

                        </td>






















                    </tr>
                }
            }
        </tbody>
    </table>


</div>
<button id="btnExport" class="btn btn-warning">xls تصدير إلى</button>


@if (ViewBag.StateMessage != null)
{
    <div class="alert alert-success alert-dismissible" role="alert" style="width:inherit;position:absolute;bottom:5%;" id="ToFadeMessage">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        @ViewBag.StateMessage
    </div>
}
