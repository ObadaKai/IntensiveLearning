@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<div ng-controller="SubBndsCtrl">
    <p>
        <a href="/SubBnds/Create/{{Bnd.Bndid}}">انشاء جديد</a>
    </p>

    <div style="display:block;margin-bottom:15px;">
        <div class="row">
            <div class="col-sm-4">
                <table class="table table-striped">
                    <tr>
                        <th style="background-color:rgba(37, 8, 4,0.7);color:white;">رقم البند</th>
                        <td>{{Bnd.Bndid}}</td>

                    </tr>
                    <tr>
                        <th style="background-color:rgba(37, 8, 4,0.7);color:white;">اسم البند</th>
                        <td>{{Bnd.Bndname}}</td>

                    </tr>
                    <tr>
                        <th style="background-color:rgba(37, 8, 4,0.7);color:white;">موازنة البند</th>
                        <td>{{Bnd.BndTotalNum | currency}}</td>

                    </tr>
                    <tr>
                        <th style="background-color:rgba(37, 8, 4,0.7);color:white;">المشتريات</th>
                        <td>{{Bnd.BndPaidAmount | currency}}</td>

                    </tr>
                    <tr>
                        <th style="background-color:rgba(37, 8, 4,0.7);color:white;">القيمة المتبقية</th>
                        <td ng-style="{'background-color': Bnd.BndRemaining > 0 ? '#5cb85c' :'#d9534f' }">{{Bnd.BndRemaining | currency}}</td>
                    </tr>
                </table>

            </div>
            <div class="col-sm-8">
                <table class="table table-striped">
                    <thead>
                        <tr class="bg-primary">
                            <th ng-repeat="Center in Centers">{{Center.id}}. {{Center.Name}}</th>
                        </tr>

                    </thead>
                    <tbody>
                        <tr>
                            <td ng-repeat="Center in Centers">{{Center.Center | currency}}</td>
                        </tr>
                    </tbody>

                </table>

            </div>
        </div>
    </div>






    <div id="table_wrapper">
        <table class="table table-striped">
            <thead>

                <tr class="bg-primary">
                    <th>
                        المعلومات
                    </th>
                    <th>
                        سعر القطعة
                    </th>
                    <th>
                        العدد
                    </th>

                    <th>
                        اسم المركز
                    </th>
                    <th>
                        اسم الرئيسي
                    </th>
                    <th>
                        المجموع الكلي
                    </th>

                    <th>
                        تاريخ الادخال
                    </th>
                    <th>
                        الدفع
                    </th>
                    <th>
                        الشراء
                    </th>

                    <th>
                        قبول الاثبات
                    </th>
                    <th>
                        الاثبات
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="SubBnd in SubBnds">
                    <td>
                        {{SubBnd.Subject}}
                    </td>
                    <td>
                        {{SubBnd.PeacePrice | currency}}
                    </td>
                    <td>
                        {{SubBnd.Quantity}}
                    </td>
                    <td>
                        {{SubBnd.Center}}
                    </td>
                    <td>
                        {{SubBnd.CenterDepended}}
                    </td>
                    <td>
                        {{SubBnd.SumPrice | currency}}
                    </td>
                    <td>
                        {{SubBnd.Date | date:'MM/dd/yyyy'}}
                    </td>
                    <td>
                        @if (Session["Finance"] != null)
                        {
                            if ((bool)Session["Finance"] == true)
                            {
                                <span ng-if="SubBnd.BuyingApprove == null"><a ng-href="@Url.Action("BuyingApprove","SubBnds")/{{SubBnd.id}}"><span class="glyphicon glyphicon-ok"></span></a></span>
                                <span ng-if="SubBnd.BuyingApprove != null" class="glyphicon glyphicon-ok"></span>
                            }
                            else
                            {
                                <span ng-if="SubBnd.BuyingApprove != null" class="glyphicon glyphicon-ok"></span>
                            }
                        }
                        else
                        {
                            <span ng-if="SubBnd.BuyingApprove != null" class="glyphicon glyphicon-ok"></span>
                        }

                    </td>
                    <td>
                        @if (Session["Finance"] != null)
                        {
                            if ((bool)Session["Finance"] == true)
                            {
                                <span ng-if="SubBnd.PayymentApprove == null && SubBnd.BuyingApprove != null"><a ng-href="@Url.Action("PayymentApprove", "SubBnds")/{{SubBnd.id}}"><span class="glyphicon glyphicon-ok"></span></a></span>
                                <span ng-if="SubBnd.PayymentApprove != null" class="glyphicon glyphicon-ok"></span>
                            }
                            else
                            {
                                <span ng-if="SubBnd.PayymentApprove != null" class="glyphicon glyphicon-ok"></span>
                            }
                        }
                        else
                        {
                            <span ng-if="SubBnd.PayymentApprove != null" class="glyphicon glyphicon-ok"></span>
                        }
                    </td>
                    <td>
                        @if (Session["Finance"] != null)
                        {
                            if ((bool)Session["Finance"] == true)
                            {
                                <span ng-if="SubBnd.ProofAcceptance == null && SubBnd.PayymentApprove != null && SubBnd.BuyingApprove != null && SubBnd.proof != null"><a ng-href="@Url.Action("ProofAcceptance","SubBnds")/{{SubBnd.id}}"><span class="glyphicon glyphicon-ok"></span></a></span>
                                <span ng-if="SubBnd.ProofAcceptance != null" class="glyphicon glyphicon-ok"></span>
                            }
                            else
                            {
                                <span ng-if="SubBnd.ProofAcceptance != null" class="glyphicon glyphicon-ok"></span>
                            }
                        }
                        else
                        {
                            <span ng-if="SubBnd.ProofAcceptance != null" class="glyphicon glyphicon-ok"></span>
                        }
                    </td>
                    <td>
                        <a ng-if="SubBnd.proof != null" ng-href="@Url.Action("DownloadProof","Json")/{{SubBnd.proof}}" class="btn btn-warning"><span class="glyphicon glyphicon-download-alt"></span></a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <button id="btnExport" class="btn btn-warning">xls تصدير ل</button>

</div>